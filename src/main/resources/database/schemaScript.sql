DROP SCHEMA IF EXISTS `testdb` ;

CREATE SCHEMA IF NOT EXISTS `testdb` DEFAULT CHARACTER SET utf8 ;

USE `testdb` ;

CREATE TABLE `actors` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `FIRST_NAME` VARCHAR(50) NOT NULL,
  `LAST_NAME` VARCHAR(50) NOT NULL,
  `BIRTH_DATE` DATE NOT NULL,
  `COUNTRY` VARCHAR(40) NOT NULL,
  `GENDER` VARCHAR(7) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE TABLE `producers` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `FIRST_NAME` VARCHAR(50) NOT NULL,
  `LAST_NAME` VARCHAR(50) NOT NULL,
  `BIRTH_DATE` DATE NULL,
  `COUNTRY` VARCHAR(40) NOT NULL,
  `GENDER` VARCHAR(7) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE TABLE `films` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(50) NOT NULL,
  `RELEASE` DATE NULL,
  `COUNTRY` VARCHAR(40) NOT NULL,
  `DURATION_MINUTES` INT NOT NULL,
  `MONEY_FEES` BIGINT(10) NULL,
  `GENRE` VARCHAR(20) NOT NULL,
  `PRODUCER_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  FOREIGN KEY (`PRODUCER_ID`)
    REFERENCES `producers` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE `actors_films` (
  `ACTOR_ID` INT NOT NULL,
  `FILM_ID` INT NOT NULL,
  PRIMARY KEY (`ACTOR_ID`, `FILM_ID`),
  FOREIGN KEY (`ACTOR_ID`)
    REFERENCES `actors` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  FOREIGN KEY (`FILM_ID`)
    REFERENCES `films` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
